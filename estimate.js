document.addEventListener('DOMContentLoaded', function () {
    const calculateBtn = document.getElementById('calculateBtn');
    calculateBtn.addEventListener('click', calculateRunningPower);
});

const runningPower = [
    [30, 510.0, 551.0, 1076.0, 1159.0, 1840.0, 3826.0, 5894.0, 8464.0, 17357.0],
    [31, 495.0, 535.0, 1047.0, 1128.0, 1791.0, 3723.0, 5736.0, 8241.0, 16917.0],
    [32, 482.0, 521.0, 1019.0, 1098.0, 1745.0, 3626.0, 5587.0, 8029.0, 16499.0],
    [33, 469.0, 507.0, 993.0, 1070.0, 1701.0, 3534.0, 5445.0, 7827.0, 16102.0],
    [34, 457.0, 494.0, 969.0, 1044.0, 1659.0, 3446.0, 5310.0, 7636.0, 15723.0],
    [35, 445.0, 481.0, 945.0, 1018.0, 1620.0, 3363.0, 5182.0, 7453.0, 15363.0],
    [36, 434.0, 469.0, 923.0, 994.0, 1582.0, 3284.0, 5060.0, 7279.0, 15019.0],
    [37, 424.0, 458.0, 901.0, 971.0, 1546.0, 3209.0, 4944.0, 7114.0, 14690.0],
    [38, 414.0, 447.0, 881.0, 949.0, 1512.0, 3137.0, 4833.0, 6955.0, 14375.0],
    [39, 404.0, 437.0, 861.0, 929.0, 1479.0, 3069.0, 4727.0, 6804.0, 14074.0],
    [40, 395.0, 427.0, 843.0, 908.0, 1448.0, 3003.0, 4626.0, 6659.0, 13785.0],
    [41, 387.0, 418.0, 825.0, 889.0, 1418.0, 2941.0, 4529.0, 6520.0, 13509.0],
    [42, 379.0, 409.0, 808.0, 871.0, 1389.0, 2881.0, 4436.0, 6387.0, 13243.0],
    [43, 371.0, 401.0, 791.0, 853.0, 1361.0, 2824.0, 4347.0, 6260.0, 12988.0],
    [44, 363.0, 392.0, 775.0, 836.0, 1335.0, 2769.0, 4262.0, 6137.0, 12753.0],
    [45, 356.0, 385.0, 760.0, 820.0, 1310.0, 2716.0, 4180.0, 6020.0, 12506.0],
    [46, 349.0, 377.0, 746.0, 805.0, 1285.0, 2665.0, 4102.0, 5907.0, 12279.0],
    [47, 342.0, 370.0, 732.0, 790.0, 1262.0, 2616.0, 4026.0, 5798.0, 12060.0],
    [48, 336.0, 363.0, 718.0, 775.0, 1239.0, 2570.0, 3953.0, 5693.0, 11849.0],
    [49, 330.0, 356.0, 705.0, 761.0, 1218.0, 2524.0, 3884.0, 5592.0, 11646.0],
    [50, 324.0, 350.0, 693.0, 748.0, 1197.0, 2481.0, 3816.0, 5495.0, 11449.0],
    [51, 318.0, 344.0, 681.0, 735.0, 1176.0, 2439.0, 3751.0, 5402.0, 11259.0],
    [52, 313.0, 338.0, 669.0, 722.0, 1157.0, 2399.0, 3689.0, 5311.0, 11076.0],
    [53, 307.0, 332.0, 658.0, 710.0, 1138.0, 2360.0, 3628.0, 5224.0, 10899.0],
    [54, 302.0, 327.0, 647.0, 699.0, 1120.0, 1722.0, 3570.0, 5140.0, 10727.0],
    [55, 297.0, 321.0, 637.0, 688.0, 1102.0, 2286.0, 3513.0, 5058.0, 10561.0],
    [56, 293.0, 316.0, 627.0, 677.0, 1085.0, 2251.0, 3459.0, 4980.0, 10400.0],
    [57, 288.0, 311.0, 617.0, 666.0, 1069.0, 2217.0, 3406.0, 4903.0, 10245.0],
    [58, 284.0, 306.0, 608.0, 656.0, 1053.0, 2184.0, 3355.0, 4830.0, 10094.0],
    [59, 279.0, 302.0, 598.0, 646.0, 1037.0, 2152.0, 3306.0, 4758.0, 9947.0],
    [60, 275.0, 297.0, 590.0, 637.0, 1023.0, 2122.0, 3258.0, 4689.0, 9805.0],
    [61, 271.0, 293.0, 581.0, 627.0, 1008.0, 2092.0, 3212.0, 4622.0, 9668.0],
    [62, 267.0, 289.0, 573.0, 618.0, 994.0, 2063.0, 3167.0, 4557.0, 9534.0],
    [63, 264.0, 285.0, 565.0, 610.0, 980.0, 2035.0, 3123.0, 4494.0, 9404.0],
    [64, 260.0, 281.0, 557.0, 601.0, 967.0, 2008.0, 3081.0, 4433.0, 9278.0],
    [65, 256.0, 277.0, 549.0, 593.0, 954.0, 1981.0, 3040.0, 4373.0, 9155.0],
    [66, 253.0, 273.0, 542.0, 585.0, 942.0, 1955.0, 3000.0, 4316.0, 9036.0],
    [67, 250.0, 270.0, 535.0, 577.0, 929.0, 1931.0, 2962.0, 4260.0, 8920.0],
    [68, 246.0, 266.0, 528.0, 570.0, 918.0, 1906.0, 2924.0, 4205.0, 8807.0],
    [69, 243.0, 263.0, 521.0, 563.0, 906.0, 1883.0, 2888.0, 4752.0, 8697.0],
    [70, 240.0, 259.0, 514.0, 556.0, 895.0, 1860.0, 2852.0, 4101.0, 8590.0],
    [71, 237.0, 256.0, 508.0, 549.0, 884.0, 1838.0, 2818.0, 4051.0, 8486.0],
    [72, 234.0, 253.0, 502.0, 542.0, 873.0, 1816.0, 2784.0, 4002.0, 8384.0],
    [73, 232.0, 250.0, 496.0, 535.0, 863.0, 1795.0, 2751.0, 3954.0, 8285.0],
    [74, 229.0, 247.0, 490.0, 529.0, 853.0, 1774.0, 2719.0, 3908.0, 8189.0],
    [75, 226.0, 244.0, 484.0, 523.0, 843.0, 1754.0, 2688.0, 3863.0, 8095.0],
    [76, 224.0, 242.0, 478.0, 517.0, 834.0, 1735.0, 2658.0, 3819.0, 8003.0],
    [77, 221.0, 238.0, 473.0, 511.0, 824.0, 1716.0, 2629.0, 3776.0, 7914.0],
    [78, 218.8, 236.2, 468.0, 505.0, 815.0, 1697.0, 2600.0, 3735.0, 7827.0],
    [79, 216.5, 233.7, 463.0, 500.0, 806.0, 1679.0, 2572.0, 3694.0, 7742.0],
    [80, 214.2, 231.2, 457.5, 494.2, 797.8, 1661.0, 2545.0, 3654.0, 7658.0],
    [81, 211.9, 228.7, 452.5, 488.9, 789.3, 1644.0, 2518.0, 3615.0, 7577.0],
    [82, 209.7, 226.4, 447.7, 483.7, 781.1, 1627.0, 2492.0, 3578.0, 7497.0],
    [83, 207.6, 224.0, 443.0, 478.6, 773.0, 1611.0, 2466.0, 3541.0, 7420.0],
    [84, 205.5, 221.8, 438.5, 473.6, 765.2, 1594.0, 2442.0, 3505.0, 7354.0],
    [85, 203.5, 219.6, 434.0, 468.8, 757.4, 1579.0, 2417.0, 3470.0, 7270.0],
];

const runningPowerCol = { 1500: 1, 1600: 2, 3000: 3, 3200: 4, 5000: 5, 10000: 6, 15000: 7, 21097.5: 8, 42195: 9 };

function calculateRunningPower() {
    const raceDistance = document.getElementById('raceDistance').value;
    const bestTime = document.getElementById('bestTime').value;

    // 将输入的时间字符串转换为秒数
    const timeArray = bestTime.split(':');
    const totalSeconds = parseInt(timeArray[0]) * 3600 + parseInt(timeArray[1]) * 60 + parseInt(timeArray[2]);
    var runningPowerValue = 30;

    // 查找对应的跑力值
    let col = runningPowerCol[raceDistance];
    for (let i = 0; i < runningPower.length; i++) {
        let minimumTime = runningPower[i][col]
        // console.log(runningPower[i][col], totalSeconds, runningPower[i][col] <= totalSeconds);
        if (totalSeconds <= minimumTime) {
            runningPowerValue = runningPower[i][0];
        } else {
            break;
        }
    }


    if (runningPowerValue === -1) {
        document.getElementById('result').innerHTML = '最低跑力值为30';
    } else {
        document.getElementById('result').innerHTML = `预测跑力值为：${runningPowerValue}`;
    }

}